
FROM node:alpine
ENV CI=true

ENV REACT_APP_DAYTRADER_GATEWAY_SERVICE=http://localhost:2443
ENV REACT_APP_DAYTRADER_ACCOUNT_MFE_URL=http://localhost:3002
ENV REACT_APP_DAYTRADER_PORTFOLIO_MFE_URL=http://localhost:3003
ENV REACT_APP_DAYTRADER_QUOTES_MFE_URL=http://localhost:3004

WORKDIR /usr/app


COPY ./package.json ./
RUN npm install
COPY ./ ./
COPY ./set_env_and_start.sh ./

#CMD ["npm", "start"]
CMD  "/usr/app/set_env_and_start.sh" "$REACT_APP_DAYTRADER_GATEWAY_SERVICE" "$REACT_APP_DAYTRADER_ACCOUNT_MFE_URL" "$REACT_APP_DAYTRADER_PORTFOLIO_MFE_URL" "$REACT_APP_DAYTRADER_QUOTES_MFE_URL"
